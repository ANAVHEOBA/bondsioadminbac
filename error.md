Id, PATCH} route +1ms
[Nest] 19309  - 10/02/2025, 6:56:01 AM     LOG [NestApplication] Nest application successfully started +12ms
Admin API running on port 3001
API Documentation: http://localhost:3001/api/docs
[Nest] 19309  - 10/02/2025, 6:56:18 AM   ERROR [ExceptionsHandler] QueryFailedError: Unknown column 'bond.metadata' in 'where clause'
    at Query.onResult (/home/a/bondsioadminbac/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:248:33)
    at Query.execute (/home/a/bondsioadminbac/node_modules/mysql2/lib/commands/command.js:36:14)
    at PoolConnection.handlePacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:475:34)
    at PacketParser.onPacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:93:12)
    at PacketParser.executeStart (/home/a/bondsioadminbac/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:100:25)
    at Socket.emit (node:events:519:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5) {
  query: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = ? AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC",
  parameters: [
    true
  ],
  driverError: Error: Unknown column 'bond.metadata' in 'where clause'
      at Packet.asError (/home/a/bondsioadminbac/node_modules/mysql2/lib/packets/packet.js:740:17)
      at Query.execute (/home/a/bondsioadminbac/node_modules/mysql2/lib/commands/command.js:29:26)
      at PoolConnection.handlePacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:475:34)
      at PacketParser.onPacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:93:12)
      at PacketParser.executeStart (/home/a/bondsioadminbac/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:100:25)
      at Socket.emit (node:events:519:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'bond.metadata' in 'where clause'",
    sql: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = true AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC"
  },
  code: 'ER_BAD_FIELD_ERROR',
  errno: 1054,
  sqlState: '42S22',
  sqlMessage: "Unknown column 'bond.metadata' in 'where clause'",
  sql: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = true AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC"
}
[Nest] 19309  - 10/02/2025, 6:56:29 AM   ERROR [ExceptionsHandler] QueryFailedError: Unknown column 'bond.metadata' in 'where clause'
    at Query.onResult (/home/a/bondsioadminbac/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:248:33)
    at Query.execute (/home/a/bondsioadminbac/node_modules/mysql2/lib/commands/command.js:36:14)
    at PoolConnection.handlePacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:475:34)
    at PacketParser.onPacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:93:12)
    at PacketParser.executeStart (/home/a/bondsioadminbac/node_modules/mysql2/lib/packet_parser.js:75:16)
    at Socket.<anonymous> (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:100:25)
    at Socket.emit (node:events:519:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5) {
  query: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = ? AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC",
  parameters: [
    true
  ],
  driverError: Error: Unknown column 'bond.metadata' in 'where clause'
      at Packet.asError (/home/a/bondsioadminbac/node_modules/mysql2/lib/packets/packet.js:740:17)
      at Query.execute (/home/a/bondsioadminbac/node_modules/mysql2/lib/commands/command.js:29:26)
      at PoolConnection.handlePacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:475:34)
      at PacketParser.onPacket (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:93:12)
      at PacketParser.executeStart (/home/a/bondsioadminbac/node_modules/mysql2/lib/packet_parser.js:75:16)
      at Socket.<anonymous> (/home/a/bondsioadminbac/node_modules/mysql2/lib/base/connection.js:100:25)
      at Socket.emit (node:events:519:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5) {
    code: 'ER_BAD_FIELD_ERROR',
    errno: 1054,
    sqlState: '42S22',
    sqlMessage: "Unknown column 'bond.metadata' in 'where clause'",
    sql: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = true AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC"
  },
  code: 'ER_BAD_FIELD_ERROR',
  errno: 1054,
  sqlState: '42S22',
  sqlMessage: "Unknown column 'bond.metadata' in 'where clause'",
  sql: "SELECT `bond`.`id` AS `bond_id`, `bond`.`name` AS `bond_name`, `bond`.`city` AS `bond_city`, `bond`.`latitude` AS `bond_latitude`, `bond`.`longitude` AS `bond_longitude`, `bond`.`description` AS `bond_description`, `bond`.`max_members` AS `bond_max_members`, `bond`.`is_unlimited_members` AS `bond_is_unlimited_members`, `bond`.`request_to_join` AS `bond_request_to_join`, `bond`.`is_public` AS `bond_is_public`, `bond`.`post_to_story` AS `bond_post_to_story`, `bond`.`banner` AS `bond_banner`, `bond`.`rules` AS `bond_rules`, `bond`.`is_trending` AS `bond_is_trending`, `bond`.`view_count` AS `bond_view_count`, `bond`.`member_count` AS `bond_member_count`, `bond`.`likes_count` AS `bond_likes_count`, `bond`.`created_at` AS `bond_created_at`, `bond`.`updated_at` AS `bond_updated_at`, `bond`.`creator_id` AS `bond_creator_id`, `creator`.`id` AS `creator_id`, `creator`.`full_name` AS `creator_full_name`, `creator`.`user_name` AS `creator_user_name`, `creator`.`email` AS `creator_email`, `creator`.`phone` AS `creator_phone`, `creator`.`otp_phone` AS `creator_otp_phone`, `creator`.`otp_email` AS `creator_otp_email`, `creator`.`phone_verified` AS `creator_phone_verified`, `creator`.`email_verified` AS `creator_email_verified`, `creator`.`dob` AS `creator_dob`, `creator`.`country_id` AS `creator_country_id`, `creator`.`bio` AS `creator_bio`, `creator`.`profile_image` AS `creator_profile_image`, `creator`.`latitude` AS `creator_latitude`, `creator`.`longitude` AS `creator_longitude`, `creator`.`notification` AS `creator_notification`, `creator`.`device_type` AS `creator_device_type`, `creator`.`password` AS `creator_password`, `creator`.`fcm_token` AS `creator_fcm_token`, `creator`.`social_id` AS `creator_social_id`, `creator`.`social_type` AS `creator_social_type`, `creator`.`deleted_at` AS `creator_deleted_at`, `creator`.`created_at` AS `creator_created_at`, `creator`.`gender` AS `creator_gender`, `creator`.`role` AS `creator_role`, `userInterests`.`id` AS `userInterests_id`, `userInterests`.`interest` AS `userInterests_interest`, `userInterests`.`is_active` AS `userInterests_is_active`, `userInterests`.`created_at` AS `userInterests_created_at`, COUNT(DISTINCT `bu`.`user_id`) AS `member_count` FROM `bonds` `bond` LEFT JOIN `users` `creator` ON `creator`.`id`=`bond`.`creator_id`  LEFT JOIN `bonds_user_interests` `bond_userInterests` ON `bond_userInterests`.`bond_id`=`bond`.`id` LEFT JOIN `user_interests` `userInterests` ON `userInterests`.`id`=`bond_userInterests`.`user_interest_id`  LEFT JOIN `bonds_users` `bu` ON `bu`.`bond_id` = `bond`.`id` WHERE `bond`.`is_trending` = true AND JSON_EXTRACT(COALESCE(bond.metadata, '{}'), '$.hidden_at') IS NULL GROUP BY `bond`.`id`, `creator`.`id`, `userInterests`.`id` ORDER BY `bond`.`likes_count` DESC, member_count DESC, `bond`.`view_count` DESC"
}
